services:
  dozzle:
    image: amir20/dozzle:latest
    container_name: dozzle
    restart: unless-stopped

    environment:
      # REQUIRED for v8+
      DOCKER_HOST: tcp://docker-socket-proxy:2375

      # Optional UI tweaks
      DOZZLE_LEVEL: info
      DOZZLE_NO_ANALYTICS: "true"

    networks:
      - proxy_net

    labels:
      - traefik.enable=true

      # ---- Router ----
      - traefik.http.routers.dozzle.rule=Host(`dozzle.theblaskies.com`)
      - traefik.http.routers.dozzle.entrypoints=websecure
      - traefik.http.routers.dozzle.tls=true
      - traefik.http.routers.dozzle.tls.certresolver=cloudflare

      # ---- Service ----
      - traefik.http.services.dozzle.loadbalancer.server.port=8080

networks:
  proxy_net:
    external: true
